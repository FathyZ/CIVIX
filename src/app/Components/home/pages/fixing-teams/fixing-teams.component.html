<div class="card">
    <p-table [value]="teams" 
             dataKey="name" 
             rowGroupMode="subheader" 
             groupRowsBy="name" 
             [tableStyle]="{'min-width': '70rem'}">
        
        <!-- Table Header -->
        <ng-template #header>
            <tr>
                <th style="width:25%">Team Name</th>
                <th style="width:25%">Team Leader</th>
                <th style="width:25%">Status</th>
                <th style="width:25%">Actions</th>

            </tr>
        </ng-template>

        <!-- Group Header (Expandable Row) -->
        <ng-template #groupheader let-team let-expanded="expanded">
            <tr>
                <td colspan="4">
                    <button type="button" 
                            pButton 
                            pRipple 
                            [pRowToggler]="team"
                            text 
                            rounded 
                            plain 
                            class="mr-2"
                            [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'">
                    </button>
                    <span class="font-bold ml-2">{{ team.name }}</span>
                </td>
            </tr>
        </ng-template>

        <!-- Expanded Row -->
        <ng-template #expandedrow let-team>
            <tr>
                <td colspan="4">
                    <div><strong>Team Leader:</strong> {{ team.teamLeader }}</div>
                    <div><strong>Team Members:</strong></div>
                    <ul>
                        <li *ngFor="let member of team.members">{{ member.name }}</li>
                    </ul>
                </td>
            </tr>
        </ng-template>

        <!-- Group Footer -->
        <ng-template #groupfooter let-team>
            <tr class="p-rowgroup-footer">
                <td colspan="4" style="text-align: right">Total Members</td>
                <td>{{ getTotalMembers(team.name) }}</td>
            </tr>
        </ng-template>

    </p-table>
</div>
